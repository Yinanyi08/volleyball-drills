<view class="page-container">
  <!-- Sticky Header for Filters -->
  <view class="header-sticky">
    <view class="nav-switch">
      <view class="nav-item active">技术训练</view>
      <view class="nav-item" bindtap="switchToConditioning">专项体能</view>
      <view class="nav-item nav-favorite" bindtap="goToFavorites">
        <text class="nav-favorite-icon">♥</text>
      </view>
    </view>
    
    <view class="filter-wrapper">
      <!-- Age Group Filter -->
      <scroll-view class="filter-scroll age-scroll" scroll-x enable-flex>
        <view 
          wx:for="{{ageGroups}}" 
          wx:key="id"
          class="filter-tab {{selectedAgeGroup === item.id ? 'active-age' : ''}}"
          bindtap="onSelectAgeGroup"
          data-id="{{item.id}}"
        >
          {{item.name}}
        </view>
      </scroll-view>

      <!-- Skill Category Filter -->
      <scroll-view class="filter-scroll skill-scroll" scroll-x enable-flex>
        <view 
          wx:for="{{categories}}" 
          wx:key="id"
          class="filter-tab {{selectedCategory === item.id ? 'active-skill' : ''}}"
          bindtap="onSelectCategory"
          data-id="{{item.id}}"
        >
          {{item.name}}
        </view>
      </scroll-view>
    </view>
  </view>

  <!-- Drills List -->
  <view class="drills-list">
    <view 
      wx:for="{{filteredDrills}}" 
      wx:key="id" 
      class="drill-card fade-in"
      bindtap="goToDetail"
      data-slug="{{item.id}}"
      style="animation-delay: {{index * 0.05}}s"
    >
      <view class="drill-image-container">
        <image class="drill-image" src="{{item.image}}" mode="aspectFill" />
        <view class="drill-image-gradient"></view>
        <view 
          class="card-favorite-btn {{favoriteIds.includes(item.id) ? 'active' : ''}}" 
          catchtap="toggleFavorite" 
          data-id="{{item.id}}"
        >
          <text class="card-favorite-icon">{{favoriteIds.includes(item.id) ? '♥' : '♡'}}</text>
        </view>
      </view>
      
      <view class="drill-info">
        <view class="drill-title">{{item.title}}</view>
        <view class="drill-desc">{{item.description}}</view>
        <view class="drill-meta">
          <text class="tag phase-tag">{{item.phase}}</text>
          <view wx:for="{{item.categories}}" wx:for-item="cat" wx:key="*this" class="tag category-tag">
            {{cat}}
          </view>
        </view>
      </view>
    </view>
    
    <!-- Empty State -->
    <view wx:if="{{filteredDrills.length === 0}}" class="no-data">
      <icon type="warn" size="48" color="#cbd5e1" class="no-data-icon"/>
      <text>该分类下暂无项目</text>
    </view>
  </view>
</view>
